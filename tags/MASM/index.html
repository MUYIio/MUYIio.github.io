<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Shawlon`s Blog</title>
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">
  <link rel="stylesheet" href="/css/style.css">
<style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loaderҳ����ʧ���ý����ķ�ʽ*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo���ֶ��� */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//ʹ�ý����ķ�������loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//ǿ����ʾloading page 1s  
    };
    loaded();
})()
 </script><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loaderҳ����ʧ���ý����ķ�ʽ*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo���ֶ��� */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//ʹ�ý����ķ�������loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//ǿ����ʾloading page 1s  
    };
    loaded();
})()
 </script></head>


 <div id="loading-container">
     <p class="loading-text"></p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url()">
        <div class='av-pic' style="background-image: url()">
        </div>
    </section>
    <section class='menu'>
        <div>Shawlon`s Blog</div>
        
            <div>Yshawlon</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
    <header class='PageTitle'>
        <h1>{ MASM }</h1>
    </header>
  
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/hui-bian-yu-yan-xue-xi-dosbox-masm-an-zhuang-ji-shi-yong-jiao-cheng.html">汇编语言学习 DOSBox+MASM 安装及使用教程</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2021-05-08T06:19:14.000Z" itemprop="datePublished">
    2021-05-08
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/DOSBox/">DOSBox</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/MASM/">MASM</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/汇编/">汇编</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>学校没有开设《汇编语言》这门课，但我觉得学习汇编挺重要的，对学习计组以及理解计算机原理很有帮助！</p>
<h2 id="1】安装DOSBox和MASM"><a href="#1】安装DOSBox和MASM" class="headerlink" title="1】安装DOSBox和MASM"></a>1】安装DOSBox和MASM</h2><h3 id="1-安装DOSBox"><a href="#1-安装DOSBox" class="headerlink" title="1)安装DOSBox"></a>1)安装DOSBox</h3><p>首先官网下载DOSBox<a href="https://www.dosbox.com/download.php?main=1" target="_blank" rel="noopener">传送门</a>，网盘链接：<a href="https://pan.baidu.com/s/13H0IU9xdYUJIQnwv1eE4Ag" target="_blank" rel="noopener">https://pan.baidu.com/s/13H0IU9xdYUJIQnwv1eE4Ag</a>  提取码：2g8s ，包含MASM</p>
<p>安装过程就不说了，建议安装在D盘，C盘也可以。我这里是安装在C盘，安装好后打开，<strong>注意有两个窗口，不要关闭</strong></p>
<p>找到文件：<strong>C:\Users\用户\AppData\Local\DOSBox\dosbox-0.74-3.conf</strong>，找不到AppData查看隐藏的文件，使用记事本打开dosbox-0.74-3.conf，在末尾添加下面两行代码：</p>
<pre><code>mount d d:\masm
 d:</code></pre><p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/01.png" alt></p>
<p>上面代码的意思就是把D盘映射为虚拟C盘，现在打开DOSBox可以看到自动映射了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/2.png" alt></p>
<h3 id="2）安装MASM"><a href="#2）安装MASM" class="headerlink" title="2）安装MASM"></a>2）安装MASM</h3><p>自己去下载也可以，网盘里面下载下来直接提取到<strong>D盘根目录</strong>就行了</p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/3.png" alt></p>
<p>没有提取    MASM是无法进行debug的，现在打开就可以愉快的开始使用了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/4.png" alt></p>
<h2 id="2】使用DOSBox编写汇编程序"><a href="#2】使用DOSBox编写汇编程序" class="headerlink" title="2】使用DOSBox编写汇编程序"></a>2】使用DOSBox编写汇编程序</h2><h3 id="1）编写-helloword-汇编源程序"><a href="#1）编写-helloword-汇编源程序" class="headerlink" title="1）编写 helloword 汇编源程序"></a>1）编写 helloword 汇编源程序</h3><p>打开 DOSBox，输入 <strong>edit</strong> 编写一个汇编源程序</p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/5.png" alt></p>
<p>代码：//</p>
<pre class="line-numbers language-asm"><code class="language-asm">data segment                   ;这里定义一个数据段
     tab db 'hello world$'     ;这里用内存存放字节数据 'hellow world!',$用来判断字符串是否输出完毕
data ends                      ;数据段的结束标志

code segment                   ;这里定义了一个代码段
assume cs:code, ds:data        ;这里把程序中定义的段与对应的段寄存器关联起来

start:                         ;这里是一个标号，根据end后面的标号判断这里是程序的开始位置
      mov ax,data
      mov ds,ax                ;这里把数据段的地址放到数据段寄存器ds中
      lea dx,tab               ;dx中放将要显示数据的偏移地址
      mov ah,9h
      int 21h                  ;调用21号中断的9号功能来显示字符串

      mov ah,4c00h
      int 21h                  ;程序返回在这里插入图片描述

code ends                      ;代码段的结束语
end start                      ;定义程序从哪个标号处开始执行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>编写好后点击 file ，选择 save as …，输入文件名称 <strong>hello</strong> ，后缀是 <strong>.asm</strong> ,然后点击 <strong>ok</strong></p>
<p>也可使用其他编辑器编写源代码，保存到 MASM 文件夹下，修改后缀为 .ASM就行了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/6.png" alt></p>
<p>打开 D:\MASM 就可以看见我们编写的源程序了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/7.png" alt></p>
<h3 id="2）编译"><a href="#2）编译" class="headerlink" title="2）编译"></a>2）编译</h3><p>打开DOSBox，输入 <strong>masm</strong> ，确认后弹出的第一行输入要编译的源程序的名称：hello.asm ,也可以直接输入 MASM hello.asm ，都一样。</p>
<blockquote>
<p>“[.ASM]”提示我们，默认的文件扩展名是asm，比如，要编译的源程序文件名是“p1.asm”，只要在这里输入“p1”即可。可如果源程序文件不是以asm为扩展名的话，就要输入它的全名。比如源程序文件名为“p1.txt”，就要输入全名。</p>
<p>在输入源程序文件名的时候一定要指明它所在的路径。如果文件就在当前路径下，只输入文件名就可以，可如果文件在其他的目录中，则要输入路径，比如，要编译的文件p1.txt在“c:\windows\desktop”下，则要输入“c:\windows\desktop\p1.txt”。这里，我们要编译的文件是C盘根目录下的1.asm，所以此处输入“c:\1.asm”。</p>
</blockquote>
<p>在输入源程序文件名后，程序会继续提示我们要编译出的目标文件的名称，目标文件是我们对一个源程序编译要得到的最终结果。注意屏幕上的显示 “[ hello.OBJ ] “,因为我们已经输入了源程序文件名为 hello.asm ,则编译程序默认输出文件名为 hello.obj ，所以不必再指定文件名。直接按 ENTER ，在当前目录下生成 hello.obj 文件。 </p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/8.png" alt></p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/9.png" alt></p>
<p>我们到MASM文件夹下可以看到多了一个 <strong>hello.obj</strong> 文件，源程序的编译最后两行如果出现警告和错误必须要改正，否则无法生成obj文件。</p>
<h3 id="3）连接"><a href="#3）连接" class="headerlink" title="3）连接"></a>3）连接</h3><p>接着上面的顺序，现在已经生成了一个<strong>hello.obj</strong> 文件，我们需要对目标文件进行连接，从而得到可执行文件。    输入 LINK ，弹出的第一行输入 <strong>obj</strong> 文件名称，比如 <strong>hello</strong>，也可以直接输入 <strong>LINK hello.obj</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/10.png" alt></p>
<p>这里出现一个警告：没有栈段，我们不予理会。</p>
<p>连接成功后会在 MASM 目录下生成一个 hello.exe 文件，如果出现错误，则无法生成。</p>
<p>连接的作用：</p>
<ol>
<li>当源程序很大时，可以将它分为几个源程序文件来编译，每个源程序编译成为目标文件后，再用连接程序将他们连接到一起，生成一个可执行文件；</li>
<li>程序中调用来某个库文件中的子程序，需要将这个库文件和该程序生成的目标文件连接到一起，生成一个可执行文件；</li>
<li>一个源程序编译后，得到了存有机器码的目标文件，目标文件中的有些内容还不能直接用来生成可执行文件，连接程序将这些内容处理为最终的可执行信息。所以，在只有一个源程序文件，而又不需要调用某个库中的子程序的情况下，也必须用连接程序对目标文件进行处理，生成可执行文件。</li>
</ol>
<h3 id="4）执行我们编译好的-exe-文件"><a href="#4）执行我们编译好的-exe-文件" class="headerlink" title="4）执行我们编译好的 .exe 文件"></a>4）执行我们编译好的 <strong>.exe</strong> 文件</h3><p>输入:</p>
<pre><code>hello.exe
hello</code></pre><p>都可以执行exe文件，当然前提是在 MASM 状态下。如图</p>
<p><img src="https://cdn.jsdelivr.net/gh/MUYIio/CDN@2.1/Images/posts/DOSBox/11.png" alt></p>
<p>至此就是编写汇编源程序以及运行的全部内容，我们还可以在此基础上进行debug，查看heelo.exe的执行情况，更多的知识请自行前往学习。</p>

      
    </div>
</article>

    </li>
  
</ul>



            <footer>
    <div>© 2023 - Tyzhao </div>
    <div>
        <span>
            Powered by <a href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>
<script src="/js/pager/dist/singlepager.js"></script>
<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>